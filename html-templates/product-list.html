<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·∫£n ph·∫©m - MomBabyShop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="common.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pattaya&family=Inter:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .font-pattaya {
            font-family: 'Pattaya', cursive;
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            transform: translateX(100%);
            transition: transform 0.3s ease-in-out;
        }
        
        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-white min-h-screen">
    <!-- Notification -->
    <div id="notification" class="notification">
        <div id="notification-content" class="bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
            <p id="notification-message"></p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="w-full py-6 px-8 lg:px-20 border-b border-gray-100">
        <div class="flex justify-between items-center">
            <div class="flex items-center space-x-8">
                <div class="text-3xl font-bold">
                    <span class="text-[#ef62f9]">MomBaby</span>
                    <span class="text-[#0bbdf8] font-pattaya">Shop</span>
                </div>
                <div class="hidden lg:flex space-x-8">
                    <a href="mombabyshop-html.html" class="font-semibold text-gray-800 hover:text-[#ef62f9]">TRANG CH·ª¶</a>
                    <a href="stroller-list.html" class="font-semibold text-gray-800 hover:text-[#ef62f9]">XE ƒê·∫®Y</a>
                    <a href="clothing-list.html" class="font-semibold text-gray-800 hover:text-[#ef62f9]">QU·∫¶N √ÅO</a>
                    <a href="product-list.html" class="font-semibold text-[#ef62f9]">S·∫¢N PH·∫®M</a>
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <div class="relative hidden md:block">
                    <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <input 
                        id="searchInput"
                        placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..."
                        class="pl-10 w-80 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#ef62f9] focus:border-transparent"
                    />
                </div>
                <button class="p-2 text-gray-600 hover:text-[#ef62f9] transition-colors">
                    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                </button>
                <button id="cartButton" class="p-2 text-gray-600 hover:text-[#ef62f9] transition-colors relative">
                    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M9 19.5h.01M20 19.5h.01"></path>
                    </svg>
                    <span id="cartCount" class="absolute -top-2 -right-2 bg-[#ef62f9] text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="px-8 lg:px-20 py-4 text-sm text-gray-600">
        <span>Trang ch·ªß</span> <span class="mx-2">/</span> <span class="text-[#ef62f9]">S·∫£n ph·∫©m</span>
    </div>

    <div class="px-8 lg:px-20 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">S·∫£n ph·∫©m cho b√©</h1>
            <p class="text-gray-600">Kh√°m ph√° b·ªô s∆∞u t·∫≠p s·∫£n ph·∫©m ƒëa d·∫°ng cho em b√©</p>
        </div>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar Filters -->
            <div class="lg:w-1/4">
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                    <h3 class="font-semibold text-lg mb-4 flex items-center">
                        <svg class="h-5 w-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"></path>
                        </svg>
                        B·ªô l·ªçc
                    </h3>

                    <!-- Category Filter -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3">Danh m·ª•c</h4>
                        <div id="categoryFilters">
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="ƒê·ªì ch∆°i" class="mr-2 category-filter">
                                <span class="text-sm">ƒê·ªì ch∆°i</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="S·ªØa b·ªôt" class="mr-2 category-filter">
                                <span class="text-sm">S·ªØa b·ªôt</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Th·ª±c ph·∫©m ch·ª©c nƒÉng" class="mr-2 category-filter">
                                <span class="text-sm">Th·ª±c ph·∫©m ch·ª©c nƒÉng</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="ƒê·ªì d√πng nh√† t·∫Øm" class="mr-2 category-filter">
                                <span class="text-sm">ƒê·ªì d√πng nh√† t·∫Øm</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="N√¥i - c≈©i" class="mr-2 category-filter">
                                <span class="text-sm">N√¥i - c≈©i</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Gh·∫ø ƒÉn" class="mr-2 category-filter">
                                <span class="text-sm">Gh·∫ø ƒÉn</span>
                            </label>
                        </div>
                    </div>

                    <div class="border-t border-gray-200 my-4"></div>

                    <!-- Brand Filter -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3">Th∆∞∆°ng hi·ªáu</h4>
                        <div id="brandFilters">
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Aptamil" class="mr-2 brand-filter">
                                <span class="text-sm">Aptamil</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Babylove" class="mr-2 brand-filter">
                                <span class="text-sm">Babylove</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Chicco" class="mr-2 brand-filter">
                                <span class="text-sm">Chicco</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Fisher-Price" class="mr-2 brand-filter">
                                <span class="text-sm">Fisher-Price</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Mothercare" class="mr-2 brand-filter">
                                <span class="text-sm">Mothercare</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="checkbox" value="Joie" class="mr-2 brand-filter">
                                <span class="text-sm">Joie</span>
                            </label>
                        </div>
                    </div>

                    <div class="border-t border-gray-200 my-4"></div>

                    <!-- Price Range Filter -->
                    <div class="mb-6">
                        <h4 class="font-medium mb-3">Kho·∫£ng gi√°</h4>
                        <div id="priceFilters">
                            <label class="flex items-center mb-2">
                                <input type="radio" name="priceRange" value="D∆∞·ªõi 300k" class="mr-2 price-filter">
                                <span class="text-sm">D∆∞·ªõi 300k</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="radio" name="priceRange" value="300k - 500k" class="mr-2 price-filter">
                                <span class="text-sm">300k - 500k</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="radio" name="priceRange" value="500k - 1 tri·ªáu" class="mr-2 price-filter">
                                <span class="text-sm">500k - 1 tri·ªáu</span>
                            </label>
                            <label class="flex items-center mb-2">
                                <input type="radio" name="priceRange" value="Tr√™n 1 tri·ªáu" class="mr-2 price-filter">
                                <span class="text-sm">Tr√™n 1 tri·ªáu</span>
                            </label>
                        </div>
                    </div>

                    <button id="clearFilters" class="w-full border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors">
                        X√≥a b·ªô l·ªçc
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:w-3/4">
                <!-- Sort and View Controls -->
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                    <p id="productCount" class="text-gray-600">
                        Hi·ªÉn th·ªã 6 c·ªßa 6 s·∫£n ph·∫©m
                    </p>
                    
                    <div class="flex items-center gap-4">
                        <div class="flex items-center gap-2">
                            <span class="text-sm">S·∫Øp x·∫øp:</span>
                            <select id="sortSelect" class="border border-gray-300 rounded px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-[#ef62f9]">
                                <option value="popular">Ph·ªï bi·∫øn</option>
                                <option value="price-low">Gi√° th·∫•p ƒë·∫øn cao</option>
                                <option value="price-high">Gi√° cao ƒë·∫øn th·∫•p</option>
                                <option value="newest">M·ªõi nh·∫•t</option>
                            </select>
                        </div>
                        
                        <div class="flex border border-gray-300 rounded">
                            <button id="gridView" class="px-3 py-1 bg-[#ef62f9] text-white">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                                </svg>
                            </button>
                            <button id="listView" class="px-3 py-1 text-gray-600 hover:bg-gray-50">
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Products Grid -->
                <div id="productsGrid" class="grid gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-3">
                    <!-- Products will be loaded here by JavaScript -->
                </div>

                <!-- Pagination -->
                <div id="pagination" class="flex justify-center items-center mt-8 gap-2">
                    <!-- Pagination will be loaded here by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-50 mt-16 py-12 px-8 lg:px-20">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div>
                <div class="text-2xl font-bold mb-4">
                    <span class="text-[#ef62f9]">MomBaby</span>
                    <span class="text-[#0bbdf8] font-pattaya">Shop</span>
                </div>
                <p class="text-gray-600 text-sm">
                    ƒê·ªìng h√†nh c√πng m·∫π chƒÉm s√≥c b√© y√™u v·ªõi nh·ªØng s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao.
                </p>
            </div>
            
            <div>
                <h4 class="font-semibold mb-4">S·∫£n ph·∫©m</h4>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><a href="stroller-list.html" class="hover:text-[#ef62f9]">Xe ƒë·∫©y</a></li>
                    <li><a href="clothing-list.html" class="hover:text-[#ef62f9]">Qu·∫ßn √°o b√©</a></li>
                    <li><a href="product-list.html" class="hover:text-[#ef62f9]">ƒê·ªì ch∆°i</a></li>
                    <li><a href="product-list.html" class="hover:text-[#ef62f9]">S·ªØa b·ªôt</a></li>
                </ul>
            </div>
            
            <div>
                <h4 class="font-semibold mb-4">H·ªó tr·ª£</h4>
                <ul class="space-y-2 text-sm text-gray-600">
                    <li><a href="mailto:info@mombabyshop.com" class="hover:text-[#ef62f9]">Li√™n h·ªá</a></li>
                    <li><a href="#" class="hover:text-[#ef62f9]">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
                    <li><a href="#" class="hover:text-[#ef62f9]">H∆∞·ªõng d·∫´n mua h√†ng</a></li>
                    <li><a href="#" class="hover:text-[#ef62f9]">FAQ</a></li>
                </ul>
            </div>
            
            <div>
                <h4 class="font-semibold mb-4">K·∫øt n·ªëi</h4>
                <div class="flex space-x-4">
                    <button class="p-2 text-gray-600 hover:text-[#ef62f9] transition-colors">üìò</button>
                    <button class="p-2 text-gray-600 hover:text-[#ef62f9] transition-colors">üì∑</button>
                    <button class="p-2 text-gray-600 hover:text-[#ef62f9] transition-colors">üê¶</button>
                </div>
            </div>
        </div>
        
        <div class="border-t border-gray-200 my-8"></div>
        
        <div class="text-center text-sm text-gray-600">
            <p>&copy; 2024 MomBabyShop. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
        </div>
    </footer>

    <script>
        // Product data
        const products = [
            {
                id: 1,
                name: "ƒê·ªì ch∆°i gi√°o d·ª•c Fisher-Price",
                category: "ƒê·ªì ch∆°i",
                brand: "Fisher-Price",
                price: "450.000 ƒë",
                originalPrice: "550.000 ƒë",
                image: "project/images/educational-toy.png",
                rating: 4.8,
                reviews: 124,
                discount: "18%",
                age: "6-36 th√°ng",
                priceValue: 450000,
                features: ["Ph√°t tri·ªÉn tr√≠ tu·ªá", "An to√†n", "Nhi·ªÅu m√†u s·∫Øc"]
            },
            {
                id: 2,
                name: "S·ªØa b·ªôt Aptamil cho b√© 0-6 th√°ng",
                category: "S·ªØa b·ªôt",
                brand: "Aptamil",
                price: "420.000 ƒë",
                originalPrice: null,
                image: "project/images/milk-powder.png",
                rating: 4.9,
                reviews: 203,
                discount: null,
                age: "0-6 th√°ng",
                priceValue: 420000,
                features: ["DHA", "Prebiotics", "Vitamin A, D"]
            },
            {
                id: 3,
                name: "Gh·∫ø ƒÉn cao Joie Mimzy",
                category: "Gh·∫ø ƒÉn",
                brand: "Joie",
                price: "1.800.000 ƒë",
                originalPrice: "2.100.000 ƒë",
                image: "project/images/high-chair.png",
                rating: 4.7,
                reviews: 89,
                discount: "14%",
                age: "6-36 th√°ng",
                priceValue: 1800000,
                features: ["ƒêi·ªÅu ch·ªânh ƒë·ªô cao", "Khay th√°o r·ªùi", "G·∫•p g·ªçn"]
            },
            {
                id: 4,
                name: "N√¥i c≈©i Joie Kubbie Sleep",
                category: "N√¥i - c≈©i",
                brand: "Joie",
                price: "2.450.000 ƒë",
                originalPrice: null,
                image: "project/images/crib-joie.png",
                rating: 4.6,
                reviews: 67,
                discount: null,
                age: "0-24 th√°ng",
                priceValue: 2450000,
                features: ["G·∫•p g·ªçn", "ƒêa nƒÉng", "L∆∞·ªõi tho√°ng kh√≠"]
            },
            {
                id: 5,
                name: "Gh·∫ø g·ªôi ƒë·∫ßu Holla cho b√©",
                category: "ƒê·ªì d√πng nh√† t·∫Øm",
                brand: "Babylove",
                price: "450.000 ƒë",
                originalPrice: "550.000 ƒë",
                image: "project/images/bath-chair.png",
                rating: 4.3,
                reviews: 56,
                discount: "18%",
                age: "6-36 th√°ng",
                priceValue: 450000,
                features: ["Tho√°t n∆∞·ªõc nhanh", "Ch·ªëng tr∆∞·ª£t", "ƒêi·ªÅu ch·ªânh g√≥c nghi√™ng"]
            },
            {
                id: 6,
                name: "K·ªá n·∫±m cao c·∫•p Mothercare Premium",
                category: "N√¥i - c≈©i",
                brand: "Mothercare",
                price: "3.200.000 ƒë",
                originalPrice: "3.500.000 ƒë",
                image: "project/images/crib-premium.png",
                rating: 4.9,
                reviews: 178,
                discount: "9%",
                age: "0-24 th√°ng",
                priceValue: 3200000,
                features: ["Thi·∫øt k·∫ø sang tr·ªçng", "ƒê·ªám √™m √°i", "4 b√°nh di chuy·ªÉn"]
            }
        ];

        let currentViewMode = 'grid';
        let currentPage = 1;
        const productsPerPage = 6;
        let filteredProducts = [...products];
        let wishlist = [];
        let cart = [];

        // Utility functions
        function renderStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= Math.floor(rating)) {
                    stars += '<svg class="h-4 w-4 fill-yellow-400 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>';
                } else {
                    stars += '<svg class="h-4 w-4 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>';
                }
            }
            return stars;
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const content = document.getElementById('notification-content');
            const messageElement = document.getElementById('notification-message');
            
            messageElement.textContent = message;
            
            if (type === 'success') {
                content.className = 'bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg';
            } else if (type === 'error') {
                content.className = 'bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg';
            } else {
                content.className = 'bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function addToCart(product) {
            const existingItem = cart.find(item => item.id === product.id);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({...product, quantity: 1});
            }
            updateCartCount();
            showNotification(`${product.name} ƒë√£ ƒë∆∞·ª£c th√™m v√†o gi·ªè h√†ng!`, 'success');
        }

        function toggleWishlist(product) {
            const index = wishlist.findIndex(item => item.id === product.id);
            if (index > -1) {
                wishlist.splice(index, 1);
                showNotification(`${product.name} ƒë√£ ƒë∆∞·ª£c x√≥a kh·ªèi danh s√°ch y√™u th√≠ch`, 'info');
            } else {
                wishlist.push(product);
                showNotification(`${product.name} ƒë√£ ƒë∆∞·ª£c th√™m v√†o danh s√°ch y√™u th√≠ch`, 'success');
            }
            renderProducts();
        }

        function isInWishlist(productId) {
            return wishlist.some(item => item.id === productId);
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartCount = document.getElementById('cartCount');
            if (totalItems > 0) {
                cartCount.textContent = totalItems;
                cartCount.classList.remove('hidden');
            } else {
                cartCount.classList.add('hidden');
            }
        }

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedCategories = Array.from(document.querySelectorAll('.category-filter:checked')).map(cb => cb.value);
            const selectedBrands = Array.from(document.querySelectorAll('.brand-filter:checked')).map(cb => cb.value);
            const selectedPriceRange = document.querySelector('.price-filter:checked')?.value;

            filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm);
                const matchesCategory = selectedCategories.length === 0 || selectedCategories.includes(product.category);
                const matchesBrand = selectedBrands.length === 0 || selectedBrands.includes(product.brand);
                let matchesPrice = true;

                if (selectedPriceRange) {
                    switch (selectedPriceRange) {
                        case 'D∆∞·ªõi 300k':
                            matchesPrice = product.priceValue < 300000;
                            break;
                        case '300k - 500k':
                            matchesPrice = product.priceValue >= 300000 && product.priceValue <= 500000;
                            break;
                        case '500k - 1 tri·ªáu':
                            matchesPrice = product.priceValue > 500000 && product.priceValue <= 1000000;
                            break;
                        case 'Tr√™n 1 tri·ªáu':
                            matchesPrice = product.priceValue > 1000000;
                            break;
                    }
                }

                return matchesSearch && matchesCategory && matchesBrand && matchesPrice;
            });

            currentPage = 1;
            renderProducts();
            renderPagination();
            updateProductCount();
        }

        function sortProducts() {
            const sortBy = document.getElementById('sortSelect').value;
            
            switch (sortBy) {
                case 'price-low':
                    filteredProducts.sort((a, b) => a.priceValue - b.priceValue);
                    break;
                case 'price-high':
                    filteredProducts.sort((a, b) => b.priceValue - a.priceValue);
                    break;
                case 'newest':
                    filteredProducts.sort((a, b) => b.id - a.id);
                    break;
                default:
                    filteredProducts.sort((a, b) => b.rating - a.rating);
            }
            
            renderProducts();
        }

        function updateProductCount() {
            const start = (currentPage - 1) * productsPerPage + 1;
            const end = Math.min(currentPage * productsPerPage, filteredProducts.length);
            const count = filteredProducts.length > 0 ? end - start + 1 : 0;
            document.getElementById('productCount').textContent = 
                `Hi·ªÉn th·ªã ${count} c·ªßa ${filteredProducts.length} s·∫£n ph·∫©m`;
        }

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const startIndex = (currentPage - 1) * productsPerPage;
            const endIndex = startIndex + productsPerPage;
            const currentProducts = filteredProducts.slice(startIndex, endIndex);

            // Update grid classes based on view mode
            if (currentViewMode === 'grid') {
                grid.className = 'grid gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-3';
            } else {
                grid.className = 'grid gap-6 grid-cols-1';
            }

            grid.innerHTML = currentProducts.map(product => `
                <div class="bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="${currentViewMode === 'list' ? 'flex' : ''}">
                        <!-- Product Image -->
                        <div class="relative ${currentViewMode === 'list' ? 'w-64 h-48' : 'w-full h-64'} bg-gray-50">
                            ${product.discount ? `
                                <div class="absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-semibold z-10">
                                    -${product.discount}
                                </div>
                            ` : ''}
                            <button 
                                class="absolute top-2 right-2 z-10 p-2 rounded-full hover:bg-white/80 transition-colors"
                                onclick="toggleWishlist(${JSON.stringify(product).replace(/"/g, '&quot;')})"
                            >
                                <svg class="h-4 w-4 ${isInWishlist(product.id) ? 'fill-red-500 text-red-500' : 'text-gray-400'}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                            </button>
                            <img
                                src="${product.image}"
                                alt="${product.name}"
                                class="w-full h-full object-cover"
                                onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMzUgNzVIMTY1VjEyNUgxMzVWNzVaIiBmaWxsPSIjOUNBM0FGIi8+CjxwYXRoIGQ9Ik0xMjAgMTAwTDE4MCA5NUwxNzUgMTA1TDEyMCAxMDBaIiBmaWxsPSIjOUNBM0FGIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iMTYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNkI3MjgwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiPkjDrG5oPC90ZXh0Pgo8L3N2Zz4='"
                            />
                        </div>

                        <!-- Product Info -->
                        <div class="p-4 flex-1">
                            <div class="flex items-start justify-between mb-2">
                                <h3 class="font-semibold text-lg leading-6 line-clamp-2">
                                    ${product.name}
                                </h3>
                            </div>
                            
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">${product.category}</span>
                                <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">${product.brand}</span>
                            </div>
                            
                            <div class="flex items-center mb-2">
                                <div class="flex">${renderStars(product.rating)}</div>
                                <span class="ml-2 text-sm text-gray-600">
                                    ${product.rating} (${product.reviews} ƒë√°nh gi√°)
                                </span>
                            </div>

                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-xl font-bold text-[#ef62f9]">
                                    ${product.price}
                                </span>
                                ${product.originalPrice ? `
                                    <span class="text-sm text-gray-500 line-through">
                                        ${product.originalPrice}
                                    </span>
                                ` : ''}
                            </div>

                            <!-- Age Range -->
                            <div class="mb-3">
                                <p class="text-xs text-gray-600">ƒê·ªô tu·ªïi: <span class="text-gray-800">${product.age}</span></p>
                            </div>

                            <!-- Features -->
                            <div class="mb-4">
                                <p class="text-xs text-gray-600 mb-1">ƒê·∫∑c ƒëi·ªÉm:</p>
                                <div class="flex flex-wrap gap-1">
                                    ${product.features.map(feature => `
                                        <span class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded">
                                            ${feature}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>

                            <div class="flex gap-2">
                                <button 
                                    class="flex-1 bg-[#ef62f9] hover:bg-[#df52e9] text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors"
                                    onclick="addToCart(${JSON.stringify(product).replace(/"/g, '&quot;')})"
                                >
                                    <svg class="h-4 w-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M9 19.5h.01M20 19.5h.01"></path>
                                    </svg>
                                    Th√™m v√†o gi·ªè
                                </button>                                <button class="flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors" onclick="window.location.href='product-detail.html?id=' + product.id">
                                    Xem chi ti·∫øt
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderPagination() {
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            const pagination = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            let paginationHTML = `
                <button 
                    class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}"
                    onclick="changePage(${currentPage - 1})"
                    ${currentPage === 1 ? 'disabled' : ''}
                >
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
            `;

            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <button 
                        class="w-10 h-10 border rounded-lg ${currentPage === i ? 'bg-[#ef62f9] text-white border-[#ef62f9]' : 'border-gray-300 hover:bg-gray-50'}"
                        onclick="changePage(${i})"
                    >
                        ${i}
                    </button>
                `;
            }

            paginationHTML += `
                <button 
                    class="p-2 border border-gray-300 rounded-lg hover:bg-gray-50 ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}"
                    onclick="changePage(${currentPage + 1})"
                    ${currentPage === totalPages ? 'disabled' : ''}
                >
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            `;

            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                renderProducts();
                renderPagination();
                updateProductCount();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Search functionality
            document.getElementById('searchInput').addEventListener('input', filterProducts);

            // Filter functionality
            document.querySelectorAll('.category-filter, .brand-filter, .price-filter').forEach(filter => {
                filter.addEventListener('change', filterProducts);
            });

            // Clear filters
            document.getElementById('clearFilters').addEventListener('click', function() {
                document.getElementById('searchInput').value = '';
                document.querySelectorAll('.category-filter, .brand-filter, .price-filter').forEach(filter => {
                    filter.checked = false;
                });
                filterProducts();
            });

            // Sort functionality
            document.getElementById('sortSelect').addEventListener('change', sortProducts);

            // View mode toggle
            document.getElementById('gridView').addEventListener('click', function() {
                currentViewMode = 'grid';
                this.classList.add('bg-[#ef62f9]', 'text-white');
                this.classList.remove('text-gray-600');
                document.getElementById('listView').classList.remove('bg-[#ef62f9]', 'text-white');
                document.getElementById('listView').classList.add('text-gray-600');
                renderProducts();
            });

            document.getElementById('listView').addEventListener('click', function() {
                currentViewMode = 'list';
                this.classList.add('bg-[#ef62f9]', 'text-white');
                this.classList.remove('text-gray-600');
                document.getElementById('gridView').classList.remove('bg-[#ef62f9]', 'text-white');
                document.getElementById('gridView').classList.add('text-gray-600');
                renderProducts();
            });

            // Initial render
            renderProducts();
            renderPagination();
            updateProductCount();
            updateCartCount();
        });
    </script>
</body>
</html>
